# Estienne

<img src="https://user-images.githubusercontent.com/6587811/190536556-aec1ba71-0aef-4878-9c1f-a9727e647083.png" alt="A digital image generated by an AI of a bearded man reading from a large book in the style of medieval painting." width=200 align=center>

[![Rust](https://github.com/JoelMon/Estienne/actions/workflows/rust.yml/badge.svg?branch=main)](https://github.com/JoelMon/Estienne/actions/workflows/rust.yml)
[![Crates.io](https://img.shields.io/crates/v/estienne.svg)](https://crates.io/crates/estienne)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Project Status: WIP](https://www.repostatus.org/badges/latest/wip.svg)](https://www.repostatus.org/#wip)

Estienne is a Rust library that scans plain text for Bible references and helps you format or link them to online Bibles. It targets apps that work with notes, articles, and transcripts where scripture mentions appear in normal prose. No special markup is required for detection.

Estienne is early-stage software and the API can change. It already ships tested helpers for formatting and linking verses.

## What Estienne Does

- Detect Bible references in a string using a locale-aware parser.
- Wrap references with custom prefix and postfix text for styling.
- Turn references into markdown links that point to a specific online Bible (currently JW.org).
- Return the raw references or their index positions for custom processing.

## The Name
The library is named after Robert Estienne, a French theologian of the early Christian era. 
He is best remembered for being the first to print the New Testament divided with numbered verses. [Read More](https://www.jw.org/finder?wtlocale=E&docid=2016167&srctype=wol&srcid=share&par=14)


## API at a glance
- `surround(text, prefix, postfix) -> Result<String, BibleError>`: wraps each detected reference.
- `url(&Site, text) -> Result<String, BibleError>`: inserts markdown links to the given site.
- `get_scriptures(text) -> Result<Vec<String>, BibleError>`: returns validated references.
- `get_locations(text) -> Locations`: returns reference start and end indexes plus the original string.

## Status and roadmap
- Current focus: stability, better locale coverage, and richer parsing of ranged references.
- Short term: expand supported locales and improve error messages.
- Expect breaking changes until a stable release is tagged.

## Installation

Add Estienne to your `Cargo.toml`:


```toml
[dependencies]
est = "0.8.0-alpha"
```

## Quick Examples

### Highlight references inline

```rust
let text = "A popular scripture is John 3:16, it's quoted often.";
let highlighted = est::surround(text, "<strong>", "</strong>").unwrap();
assert_eq!(
    highlighted,
    "A popular scripture is <strong>John 3:16</strong>, it's quoted often."
);
```

### Create markdown links to JW.org

```rust
use est::locales::nwt_en::Site::JwOrg;

let text = "Read Revelation 21:3-4 for comfort.";
let linked = est::url(&JwOrg, text).unwrap();
assert_eq!(linked, vec!["Read [Revelation 21:3-4](https://www.jw.org/en/library/bible/study-bible/books/revelation/21/#v66021003-v66021004) for comfort."]);
```

### Extract scriptures as plain strings

```rust
let text = "Cross reference Psalm 83:18 with Matthew 24:14.";
let refs = est::get_scriptures(text).unwrap();
assert_eq!(refs, vec!["Psalm 83:18", "Matthew 24:14"]);
```

### Get the locations of each reference

```rust
use est::{get_locations, Locations};

let text = "John 3:16 pairs well with 1 John 4:8.";
let locations: Locations = get_locations(text);
assert_eq!(locations.slices, vec![(0, 9), (24, 35)]);
assert_eq!(locations.string, text);
```

## Contributing
Contributions are welcomed, but please be aware that the project is still in its prototype phase and large portions of code might change at any moment. Feel free to open an issue if you have any questions, suggestions, or bug reports.

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.
